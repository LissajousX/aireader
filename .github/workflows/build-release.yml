# =============================================================================
# Release Orchestrator
#
# Calls all platform-specific build workflows in parallel.
# Each platform workflow can also be triggered independently via workflow_dispatch
# for debugging purposes.
#
# Workflows called:
#   build-windows.yml  → Windows NSIS installer
#   build-macos.yml    → macOS DMG (ARM + x64)
#   build-linux.yml    → Ubuntu 22.04+ AppImage + deb
#   build-focal.yml    → Ubuntu 20.04+ AppImage (Docker-based)
# =============================================================================
name: Build & Release

on:
  push:
    tags: ['v*']
  workflow_dispatch:

permissions:
  contents: write
  packages: read

jobs:
  windows:
    uses: ./.github/workflows/build-windows.yml
    secrets: inherit

  macos:
    uses: ./.github/workflows/build-macos.yml
    secrets: inherit

  linux:
    uses: ./.github/workflows/build-linux.yml
    secrets: inherit

  focal:
    uses: ./.github/workflows/build-focal.yml
    secrets: inherit
